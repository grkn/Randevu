<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>
<h:body>

	<ui:composition template="/WEB-INF/views/template.xhtml">
		<ui:define name="content">
			<p:fieldset legend="Okuldan Sorumlu Kişi Kayıt">
				<p:panelGrid columns="9">
					<p:outputLabel value="Adı: "></p:outputLabel>
					<p:inputText value="#{schoolResponsibleController.schoolResponsible.name}" placeholder="Adı Giriniz"></p:inputText>
					<p:outputLabel value="Soyadı:"></p:outputLabel>
					<p:inputText value="#{schoolResponsibleController.schoolResponsible.lastName}" placeholder="Soyadı Giriniz"></p:inputText>
					<p:outputLabel value="Ünvan:"></p:outputLabel>
					<p:inputText value="#{schoolResponsibleController.schoolResponsible.title}" placeholder="Ünvan Giriniz"></p:inputText>
					<p:outputLabel value="Okul Seçiniz:"></p:outputLabel>
					<p:selectOneMenu converter="anySelectConverter" value="#{schoolResponsibleController.selectedSchool}">
						<f:selectItems var="item" itemValue="${item}" itemLabel="${item.name}" value="#{schoolResponsibleController.schoolList}"></f:selectItems>
					</p:selectOneMenu>
					<p:commandButton actionListener="#{schoolResponsibleController.save}" value="#{schoolResponsibleController.schoolResponsible.id ne null ? 'Güncelle' : 'Kaydet'}" update="@form"></p:commandButton>
				</p:panelGrid>	
			</p:fieldset>
			
			<p:fieldset legend="Sorumlular Listesi">
				<p:dataTable var="item" value="#{schoolResponsibleController.schoolResponsibleList}" paginator="true" rows="10"
							 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
							 rowsPerPageTemplate="5,10,15" id="schoolRespList" >
					<p:column headerText="Id" sortBy="#{item.id}" filterBy="#{item.id}">
						<h:outputText value="#{item.id}" />
					</p:column>
					<p:column headerText="Adı" sortBy="#{item.name}" filterBy="#{item.name}">
						<h:outputText value="#{item.name}" />
					</p:column>
					<p:column headerText="Soyadı" sortBy="#{item.lastName}" filterBy="#{item.lastName}">
						<h:outputText value="#{item.lastName}" />
					</p:column>
					<p:column headerText="Ünvanı" sortBy="#{item.title}" filterBy="#{item.title}">
						<h:outputText value="#{item.title}" />
					</p:column>
					<p:column headerText="Okul Adı" sortBy="#{item.schoolId.name}" filterBy="#{item.schoolId.name}">
						<h:outputText value="#{item.schoolId.name}" />
					</p:column>
					<p:column headerText="Yaratılma Tarihi" sortBy="#{item.createdDate}" filterBy="#{item.createdDate}">
						<h:outputText value="#{item.createdDate}">
						 	<f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm"/>
						</h:outputText>
					</p:column>
					<p:column headerText="Yaratan Kişi" sortBy="#{item.createdUser}" filterBy="#{item.createdUser}">
						<h:outputText value="#{item.createdUser}" />
					</p:column>
					<p:column headerText="Güncelleme Tarihi" sortBy="#{item.updatedDate}" filterBy="#{item.updatedDate}">
						<h:outputText value="#{item.updatedDate}">
						 	<f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm"/>
						</h:outputText>
					</p:column>
					<p:column headerText="Güncelleyen Kişi" sortBy="#{item.updatedUser}" filterBy="#{item.updatedUser}">
						<h:outputText value="#{item.updatedUser}" />
					</p:column>
					<p:column>
						<p:commandButton actionListener="#{schoolResponsibleController.update(item.id)}" update="@form" value="Güncelle"></p:commandButton>
						<p:commandButton actionListener="#{schoolResponsibleController.delete(item)}" update="@form" value="Sil"></p:commandButton>
					</p:column>
				</p:dataTable>
			</p:fieldset>				
		</ui:define>
	</ui:composition>

</h:body>
</html>